<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Flying Eyeball</title>
    
    <!-- PWA & Mobile -->
    <link rel="manifest" href="manifest.json?v=3">
    <link rel="icon" type="image/png" href="art/Favicon.png">
    <link rel="apple-touch-icon" href="art/icon.png">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="theme-color" content="#3b82f6">

    <script src="https://cdn.tailwindcss.com"></script>
    <script src="gameConfig.js"></script>
    <style>
        :root {
            --u: 1vh;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden;
        }
        body {
            background-color: #1f2937;
            touch-action: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100dvh; 
            width: 100dvw;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        #game-container {
            position: relative;
            width: 100%;
            height: 100%;
            max-width: calc(100dvh * (9 / 16));
            max-height: calc(100dvw * (16 / 9));
            aspect-ratio: 9 / 16;
            background: white;
            box-shadow: 0 0 50px rgba(0,0,0,0.5);
            overflow: hidden;
        }
        canvas {
            display: block;
            width: 100%;
            height: 100%;
            image-rendering: auto;
        }
        #ui-layer {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            pointer-events: none;
            padding: calc(var(--u) * 4);
            z-index: 100;
        }
        #joystick {
            position: absolute;
            width: calc(var(--u) * 16);
            height: calc(var(--u) * 16);
            background: rgba(0, 0, 0, 0.05);
            border: 2px solid rgba(0, 0, 0, 0.1);
            border-radius: 50%;
            pointer-events: none;
            display: none;
            z-index: 200;
        }
        #joystick-knob {
            position: absolute;
            width: calc(var(--u) * 6);
            height: calc(var(--u) * 6);
            background: rgba(0, 0, 0, 0.15);
            border-radius: 50%;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
        .leaderboard-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: calc(var(--u) * 1.5) calc(var(--u) * 2);
            border-bottom: 1px solid rgba(0,0,0,0.03);
        }
        #game-over {
            pointer-events: none;
            z-index: 50;
        }
        #game-over > * {
            pointer-events: auto;
        }
        .txt-score { font-size: calc(var(--u) * 10); }
        .txt-title { font-size: calc(var(--u) * 5.5); }
        .txt-score-label { font-size: calc(var(--u) * 5); }
        .txt-final-score { font-size: calc(var(--u) * 10); }
        .txt-btn { font-size: calc(var(--u) * 4); }
        .txt-lb-header { font-size: calc(var(--u) * 4); }
        .txt-lb-name { font-size: calc(var(--u) * 3); }
        .txt-lb-score { font-size: calc(var(--u) * 3.5); }
        
        .name-input {
            background: #fff;
            border: 2px solid #3b82f6;
            border-radius: calc(var(--u) * 1.5);
            padding: calc(var(--u) * 1.5) calc(var(--u) * 2);
            width: 100%;
            outline: none;
            font-size: max(16px, calc(var(--u) * 3.2));
            color: #1e40af;
            text-transform: uppercase;
            font-weight: 900;
            text-align: center;
            -webkit-user-select: text;
            -moz-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
        
        /* Splash Screen */
        #splash-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #4a90c2;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            opacity: 1;
            transition: opacity 0.3s ease-out;
        }
        #splash-screen.fade-out {
            opacity: 0;
            pointer-events: none;
        }
        #splash-screen img {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
        }
    </style>
</head>
<body oncontextmenu="return false;">

    <!-- Splash Screen - shown on initial load only -->
    <div id="splash-screen">
        <img src="art/splashscreen.png" alt="Flying Eyeball">
    </div>

    <div id="game-container">
        <div id="ui-layer">
        <div id="dashboard-score" class="txt-score font-black text-black/25 text-left">
            <span id="score-val">0</span>
        </div>
    </div>
    <div id="joystick"><div id="joystick-knob"></div></div>
    <canvas id="gameCanvas"></canvas>
    <div id="game-over" class="absolute flex-col items-center justify-end text-center" style="display: none; top: 18%; bottom: 8%; left: 0; right: 0; padding: calc(var(--u) * 4);">
        <h1 id="game-over-title" class="txt-title font-black text-blue-600 uppercase tracking-tight drop-shadow-sm" style="margin-bottom: calc(var(--u) * 3);">VISION LOST!</h1>
        <div class="w-full max-w-sm bg-white/95 shadow-2xl border border-gray-100 backdrop-blur-md flex flex-col items-center" style="padding: calc(var(--u) * 4); border-radius: calc(var(--u) * 6);">
            <div class="bg-blue-50 border-blue-200 shadow-sm w-full" style="border-radius: calc(var(--u) * 4); padding: calc(var(--u) * 3); margin-bottom: calc(var(--u) * 3); border-bottom-width: calc(var(--u) * 0.8);">
                <p class="text-blue-400 font-bold uppercase tracking-widest txt-score-label" style="margin-bottom: calc(var(--u) * 1);">Your Score</p>
                <p class="txt-final-score font-black text-blue-700"><span id="final-score">0</span></p>
            </div>
            <div class="w-full bg-white overflow-hidden shadow-sm border border-gray-100 text-left" style="border-radius: calc(var(--u) * 3); margin-bottom: calc(var(--u) * 4);">
                <div class="bg-gray-50 border-bottom border-gray-100 font-black text-gray-400 tracking-[0.2em] uppercase text-center txt-lb-header" style="padding-top: calc(var(--u) * 2); padding-bottom: calc(var(--u) * 2);">üèÜ High Scores üèÜ</div>
                <div id="leaderboard-list" class="text-gray-700 font-bold">
                    <div class="py-6 text-gray-300 italic text-center txt-lb-name">Syncing Feed...</div>
                </div>
            </div>
            <button id="restart-btn" class="bg-blue-500 hover:bg-blue-600 text-white font-black transition-all active:shadow-none active:translate-y-1 w-full uppercase tracking-wider txt-btn" style="padding: calc(var(--u) * 3) calc(var(--u) * 6); border-radius: calc(var(--u) * 3); box-shadow: 0 calc(var(--u) * 1) 0 rgb(37,99,235);">Play Again</button>
        </div>
    </div>
</div>

<script type="module" src="src/main.js"></script>
</body>
</html>
